- edit ||= false
- model = entity.class.name.underscore
- collapsed = session[:entity_permissions].nil?
= subtitle :entity_permissions, collapsed, t(:permissions)
.section
  %small#entity_permissions_intro{ hidden_if(!collapsed) }
    = get_default_permissions_intro(entity.access, t("#{model}_small")) unless edit
  #entity_permissions{ hidden_if(collapsed) }
    .form-check
      = f.radio_button(:access, "Private", { onclick: "$('#people').hide()", class: 'form-check-input' })
      = f.label( :access_private, t(:keep_private), { style: "cursor:pointer", class: 'form-check-label' })
    .form-check
      = f.radio_button( :access, "Public", {onclick: "$('#people').hide()", class: 'form-check-input'})
      = f.label( :access_public, t(:make_public), { style: "cursor:pointer", class: 'form-check-label' })
    .form-check
      = f.radio_button( :access, "Shared", {onclick: "$('#people').show()", class: 'form-check-input'})
      = f.label( :access_shared, t(:share_with), { style: "cursor:pointer", class: 'form-check-label' })

    #people{ hidden_if(entity.access != "Shared") }
      .form-group
        = f.label :user_ids, "#{t(:users)}:"
        = f.select(:user_ids, user_options, {}, { multiple: true, class: "custom-select" })
      .form-group
        = f.label :group_ids, "#{t(:groups)}:"
        = f.select(:group_ids, group_options, {}, { multiple: true, class: "custom-select" })

    - if !edit and entity.is_a?(Lead)
      .form-check
        = f.radio_button(:access, t(:campaign), { onclick: "$('#people').hide(); $('#lead_access_campaign').val('Campaign');", disabled: true, class: 'form-check-input'})
        %font{ id: :copy_permissions, color: :grey }
          = t(:copy_permissions, t(:campaign_small))
